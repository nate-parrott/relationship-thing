<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'/>
	<title>How Couples Meet &amp; Stay Together</title>
	<link rel='stylesheet' href='/static/shared.css'/>
	<script src='http://d3js.org/d3.v3.min.js' charset='utf-8'></script>
	<script src='https://code.jquery.com/jquery-2.1.4.min.js'></script>
	<script src='/static/fieldNames.js'></script>
	<script src='/static/data.js'></script>
	
	<!-- import graphs -->
	<script src='/static/scatterPlot.js'></script>
	<script src='/static/distributionPlot.js'></script>
	<script src='/static/graph.js'></script>
</head>
<body>
		
	<div id='title' class='page full-height vertically-centered-outer red title'>
		<div class='vertically-centered-inner'>
			<div class='text-column'>
				<h1>How Couples Meet &amp; Stay Together</h1>
				<h5>A CS1951A Final Project by Bayla Weick, Tauseef Khan, Nate Parrott &amp; Jessica Liang</h5>
			</div>
		</div>
	</div>

	<div class='page'>
	  <div class='text-column'>
	    <h1><u>Introduction</u></h1>
	       <h3>"The heart wants what it wants. There's no logic to these things. You meet someone and you fall in love and that's that." -Woody Allen</h3>
	       <p>People are fascinated and gripped by love everyday. Woody Allen claims it's a mysterious thing that just happens. We wanted to see if we could break down "love" to show that it doesn't escape all rationale. Maybe there are patterns and who you are determines who you fall in love with. We propose that relationships that are measurably more “successful” (as determined by self-assessment by the respondents, as well as relationship duration and civil union or marriage) will be between people who share significant demographic similarities, including religion, educational attainment, age and race. In general, though, we're just curious to see what patterns arise! Of course, we need some data to start quanitfying love.</p>
	    <h2>Dataset</h2>
	       <p>Our data set is 2009-2011 Stanford study by Michael J Rosenfeld, “<a href="http://data.stanford.edu/hcmst">How Couples Meet and Stay Together</a>,” which surveyed around 4000 people about various aspects of their relationships (or lack of such).</p>
	       <p>For each respondent, the survey asked a number of demographic and relationship-related questions, including race, religion, income, location, age and sexual orientation of the respondent and their partner, the length of their relationship, how they met, their self-assessed relationship quality, and self-assessed attractiveness of the respondent and their partner.</p>
	    <h1><u>Methodology</u></h1>
	       <p>The HCMST dataset has over 400 variables so we had to do some work to extract the data that we were interested in. We created a python script that reads in the csv file version of the HCMST dataset and writes pulls out key features we wanted to analyze. These features include
	       "same_sex_couple", "respondent_race", "partner_race", "age_difference" and many more.
	       We ended up extracting about 40 different features. </p>
	       <p>The featurizer works by taking in a number of csv files to extract from and a list of all the fields that we're interested for each file. If first pulls out all of the necessary data and puts it into a dictionary from respondent id to a dictionary of fields to their values. Then we created a file called enum_mapper.tsv where each row is a field and all of the acceptable responses. We use this file to convert the different answers into enums which correspond to the order that the answers are listed in enum_mapper.tsv. Any fields with "" as a response were labeled as "MISSING" and any fields with unacceptable answers were labeled as "OTHER". Then we filter out the data that does not contain acceptable answers for a number of fields. For example, we filter out anyone whose partner passed away during the study and any respondents that indicated that they were not in a relationship during the study. Lastly we export features both as a csv and as a json object for later use.
	       </p>
	    <h2>Correlations</h2>
	       <p>Using the new data set created by our featurizer, we are able to test a few correlations and hypotheses. Below are visuals of some of the more significant findings.</p>
	  </div>
	</div>
	
	<div class='page centered'>
		<div class='text-column'>
			<h1>How satisfied are people with their relationships?</h1>
			<h3>On a scale of 1-4, where 4 is the most positive.</h3>
			<div class='graph distribution' data-x='relationship_quality' data-buckets='4'></div>
		</div>
	</div>
	<div class='page'>
		<div class='text-column'>
		<p>Before delving into the relationship quality correlations, we thought it was important to display the distribution of answers. As expected, most couples viewed their relationships in a very positive light. This skewed most of the distribution to the right where 4 means "excellent". This skew sometimes made it hard to distinguish which type of couples were truly happiest. Nonetheless, we were still able to come up with a few interesting correlations.</p>
		</div>
	</div>
	
	<div class='page'>
		<div class='text-column'>
			<h1>Do Couples' Age Differences Matter?</h1>
			<div class='graph scatter' data-x='age_difference' data-y='relationship_quality'></div>
			<table class='stats'>
				<thead>
					<tr>
						<td>Correlation</td>
						<td>Significant?</td>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Slightly negative (Pearson coefficient = -0.0546)</td>
						<td>Probably not (p = 0.0892)</td>
					</tr>
				</tbody>
			</table>
			<p>We found that difference in age and relationship quality were slightly negatively 
			correlated, but not significant. It would make sense that couples closer in age 
			are more successful, but this implies that "age is but a number" - Love knows no bounds!
			</p>
		</div>
	</div>
	
	<div class='page'>
		<div class='text-column'>
			<h1>Are Longer Relationships Happier?</h1>
			<div class='graph scatter' data-x='how_long_ago_first_romantic' data-y='relationship_quality'></div>
			<table class='stats'>
				<thead>
					<tr>
						<td>Correlation</td>
						<td>Significant?</td>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>A little bit positive (Pearson coefficient = 0.10942)</td>
						<td>Yes (p = 0.00064)</td>
					</tr>
				</tbody>
			</table>
			<p>Relationship length and relationship quality were slighlty positively correlated. This
			implies that the longer a relationship is, the happier the couple tends to be. Logically
			this would make sense since happy couples generally don't break up so their relationships
			are longer.</p>
		</div>
	</div>

	<div class='page'>
		<div class='text-column'>
			<h1>Does income affect relationship quality?</h1>
			<div class='graph' data-x='hhinc' data-y='relationship_quality'></div>
			<table class='stats'>
				<thead>
					<tr>
						<td>Correlation</td>
						<td>Significant?</td>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Positive (Pearson coefficient = 0.10466)</td>
						<td>Yes (p = 0.00010)</td>
					</tr>
				</tbody>
			</table>
			<p>We found a postive correlation between income and relationship quality. This is
			potentially due to the fact that having more income usually means less financial problems
			which puts less stress on the relationship. Also, couples with higher income potentially
			also have more opportunities to go on dates and do other relationship building activities
			which could lead to a happier relationship.</p>
		</div>
	</div>

	<div class='page'>
		<div class='text-column'>
			<h1>Does parental approval matter?</h1>
			<div class='graph distribution' data-x='relationship_quality' data-segment='parental_approval' data-buckets='4'></div>
			<table class='stats'>
				<thead>
					<tr>
						<td>Correlation</td>
						<td>Significant?</td>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Positive (Pearson coefficient = 0.37871)</td>
						<td>Definitely (p = 0.00001)</td>
					</tr>
				</tbody>
			</table>
			<p>It appears that having your parents' approval is crucial to a happy relationship. Interviewees could either indicate that at least one parent approved or neither did. Correlating this with relationship quality revealed a mildly positive correlation of 0.38. The statistical significance of this is very high as you can see from the p-value. So who needs a crystal ball when you can just ask your parents about your new love? ;)</p>
		</div>
	</div>

		<div class='page'>
		<div class='text-column'>
			<h1>Does meeting on the internet impact relationship quality?</h1>
			<div class='graph distribution' data-x='relationship_quality' data-segment='q32_internet' data-buckets='4'></div>
			<table class='stats'>
				<thead>
					<tr>
						<td>Correlation</td>
						<td>T-test Significance?</td>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Positive (Pearson coefficient = -0.01062)</td>
						<td>Nope (p = 0.75693)</td>
					</tr>
				</tbody>
			</table>
			<p>This is great news for the modern couple that meets on the internet! When comparing the relationship quality between couples that met on the internet and ones that didn't, we found no statistical difference. Couples that met on the internet even had a slightly higher average rating of 3.35 whereas those that didn't had an average of 3.33. (3 means good and 4 means excellent.) Again, though, the p-value is extremely high suggesting that the two distributions are very similar. When asked how the couples met, interviewees could answer as "0" or "1". "0" means did meet through internet and "1" means didn't. Some of the answers were blank and we thought it would be interesting to see their distribution as well. It appears that it makes no difference at all how you meet your bae.</p>
		</div>
	</div>
	
	<div class='page'>
		<div class='text-column'>
			<h1>Do Couples Have the Same Levels of Education?</h1>
			<div class='graph scatter' data-x='respondent_yrsed' data-y='partner_yrsed'></div>
			<table class='stats'>
				<thead>
					<tr>
						<td>Correlation</td>
						<td>Significant?</td>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Positive (Pearson coefficient = 0.410006)</td>
						<td>Definitely (p &lt; 0.0001)</td>
					</tr>
				</tbody>
			</table>
			<p>Recall earlier that we showed that most couples rate the quality of their relationship highly. With this in mind, we decided to simply look at one of the traits of couples. So are you likely to end up with someone with the same level of education? In terms of years of education, the answer is absolutely yes! There is a mild positive correlation of 0.41 but an extremely significant p-value of 0.0001.</p>
		</div>
	</div>

	<div class='page'>
		<div class='text-column'>
			<h1><u>Other Findings</u></h1>
				<p>Along with some of our significant findings above, we tested a number of other traits to find patterns.
					<ul>
						<li><i>Does parental approval differ between married and non-married couples?</i> <p>It turns out the answer is no. Married couples had parental approval about 65% of the time and non-married couples had parental approval about 63% of the time. After running a t-test on the distributions, we found that the p-value was very high and thus insignificant.</p></li>
						<li><i>Is attractivness affected by how much your partner makes?</i> <p>Essentially the question asks is if your partner makes more, are you more likely to find them very attractive? Or maybe it negatively affects perceived attractiveness. However, the p-value was roughly 0.3 and did not show any significant difference.</p></li>

						<li><i>Is attractiveness affected by the religion of your partner?</i><p> The question asks if you and your partner have different religions, are you more likely to find them attractive? We found that this was not true as the p-value was 0.206 and thus insignificant.</p></li>

						<li><i>Do partners with the same political affiliation tend to be happier?</i> <p>Participants were asked to name their political affiliation and could answer as "Democrat", "Republican", or "Other". Then we found where these answers matched to run a t-test comparing relationship quality. The test revealed that there is a very significance difference, with a p-value of 3.7e-8. On average, couples that had the same political affiliations rated their relationship quality 0.1 points higher (out of 4). It's also interesting to note that both groups of couples had about 1000 data points. Thus, having the same political affiliation is very likely to make your relationship a bit happier!</p></li>
					</ul>
				</p>
		</div>
	</div>

	<div class='page'>
	  <div class='text-column'>
	    <h1><u>Building a Classifier</u></h1>
	      <p>To start building the classifier, we needed to modify the data we collected. Some of the features we wished to test weren't binary to start with. For example, "age difference" was a feature we wished to include. This started out as a range of numbers and we were able to convert it into 0 or 1 depending on the value. If the age difference between partners was less than 5 years the value became 0. If the age difference was greater than or equal to 5 years, the value became 1.</p>
	      <p>Another issue we ran into was missing data. Some of the interviewees refused to answer certain questions, so there were plenty of "observation" with a missing feature. Instead of throwing the data out, we decided to do some research on how to best deal with the problem. We settled on assigning that a missing feature randomly to 0 or 1. Other options were computationally intensive and seemed unnecessary.<p>
	      <p>Our class label was if the couple broke up in the third wave of the study or not. We ended up using the following features in our classifier:</p>
	      <ul>
	      	<li>Same sex couple or not</li>
	      	<li>Parents approve or disapprove</li>
	      	<li>The age difference between the two is greater or less than 5 years</li>
	      	<li>Couple met on the internet or not</li>
	      	<li>Partners are the same race or not</li>
	      	<li>Partners are part of the same political party or not</li>
	      	<li>Partners practice the same religion or not</li>
	      </ul>
	      <p>Finally, with a set of observations composed of features and a set of observation labels indicating if that couple was still together or not, we could start building classifiers. We decided to test four different classifiers:
		  <ul>
		    <li>Decision Tree</li>
		    <li>Naive Bayes</li>
		    <li>Support Vector Machine</li>
		    <li>Logistic Regression</li>
		  </ul>
	      </p>
	      <p>Since some of the data was random, we tested each classifier repeatedly. Averaging over 20 different runs, we found that the average 10-fold cross validation mean for the different classifiers were:
		  <ul>
		    <li>Decision Tree: 0.673198541538</li>
		    <li>Naive Bayes: 0.698055972092</li>
		    <li>Support Vector Machine: 0.697729433245</li>
		    <li>Logistic Regression: 0.697648221379</li>
		  </ul>
		  We ran this test roughly 10 more times just to ensure consistency and found that Naive Bayes was consistenly slightly better than the rest of the classifiers, at least according to the cross validation statistic. It's interesting to note that about 80% of couples remained togther after two years. Although some of the participants did not answer, randomization gave an average around 80%.
	      </p>
	      <p>Finally, we returned a Naive Bayes classifier and built a web engine on top of it to create the quiz below!</p>
	  </div>
	</div>


	<div class='page full-height red vertically-centered-outer'>
		<div class='vertically-centered-inner'>
			<div class='text-column'>
				<h1>Take the Quiz</h1>
				<p>Above we explain a bit about the methodology behind our classifier and how <em>you too</em> can classify your relationship and determine your chances of breaking up. </p>
				<p><br/><a href='/quiz' class='button' id='take-quiz'>Take the quiz</a></p>
			</div>
		</div>
	</div>

	<div class='page'>
	  <div class='text-column'>
	    <h1><u>Conclusions</u></h1>
	       <p>	Going back to our original hypothesis, we can conclude that relationships between people with certain demographic similarities are indeed more successful. A “successful relationship” is measured by both self-assessed relationship quality and the length of the relationship. Our research indicated that both of these two measures of relationship quality are actually very correlated. The two variables have a Pearson correlation of 0.109 which is very significant as it is far greater than the critical p-value of 0.006. We found that most people tend to enter relationships with people with a similar level of education to themselves. Most respondents self-identified their relationships as being of a high quality and having a similar level of education was an important component of that. One partner’s level of education is highly correlated with the other partner’s level of education. Other demographic factors did not prove to be very significant when looking at how successful a relationship is. Both partners being of a similar age was not a significant factor at all and age difference did not prove to have much of an effect on the quality of a relationship. The two factors had a correlation coefficient of -.05, which is less than the critical p-value of 0.089. We also explored other demographic factors with respect to relationship success. Both race and religion proved to be very correlated with these outcomes. That is, respondents who had the same religion or race as their partner in the survey are more likely to be in a relationship that lasts longer. 
	       </p>

	       <p>
	       In addition, we found some interesting relationships between factors we did not think would be as relevant. Household income turned out to be correlated with self-assessed relationship quality with a correlation coefficient of 0.105 and p-value of 0.001. Similarly, parental approval is significantly correlated with self-assessed relationship quality with pearson coefficient 0.378 and p-value 0.0001. We also looked at relationships between different demographic traits and how attractive someone finds their partner as we found mutual attraction is an important factor in having a successful relationship. We checked this using two-sided t-tests in order to compare demographic factors by splitting people into two groups. Our conclusion is that people that are of the same or different race as their partner have different perceptions of the attractiveness of their partner.  The likelihood of partners who are of of the same or different races having different perceptions of the attractiveness of their partner has a p-value of 0.0057, which is significant as it below the critical level of 0.1 that we used. All of the other factors that we checked including income, religion, and whether or not the couple are married did not prove to have a significant effect when split into two groups on how attractive one person perceived their partner as. Our investigations proved some of our initial hypothesis about similar demographic factors leading to more successful relationships as correct, while some factors proved to not be very significant. We also were able to further develop our view of what exactly constitutes as a successful relationship. 
	       </p>
	    <h2>Reflection</h2>
	       <p>
            Looking back at our project proposal, we managed to accomplish most of the goals that we set out to accomplish. We explored the interesting relationships between data that we had set out to do. We managed to develop a good understanding of what factors are correlated with relationship success and which ones aren’t. We were also able to find out what factors are likely to make a relationship last longer. We weren’t as successful with analyzing results across different types of relationships. We looked at results across same-sex/heterosexual and married/unmarried relationships, but results were not significant. This could either be because of our dataset not being sufficient for these purposes or because there is actually no correlation, but this would require further investigation. We did manage to accomplish all we had set out as a goal for 125% of our targets. 
			</p>
		<h2>Improvements</h2>
           <p>We can improve our classifier by incorporating additional data into it. We currently use variables that we were able to convert into a binary format. This allowed us to construct a basic classifier. However, we can refine this further by adding more data into it. This would involve finding a way to put more data into a numerical format. Since some of the questions are not yes or no, we would need to develop categories that map certain answers to questions to numbers in a more sophisticated way. We would also need to split up certain questions into a series of yes or no questions so that they data could be made binary in order to develop a more effective classifier. 
           </p>
	    <h2>Future Work</h2>
	       <p>In the future, we would like to expand the scope of our research to include more data. We found that this dataset came with some limitations for our purposes. One of the main measures of whether or not a relationship was successful that we used was self-assessed relationship quality. The data demonstrates that a larger proportion of people self identify their relationship as being of a high quality. For a more accurate representation of this, we could in the future use a different data set that objectively assesses relationship quality based on external factors. We could also consider conducting our own survey for this purpose and for a more focused take on the factors that we found important including education and race. The data could also be more diverse as the amount of respondents that fit into certain demographic groups, such as same sex couples, was not high enough to be able to accurately analyze trends regarding them. 
	       </p>

           
	  </div>
	</div>
	
</body>
</html>
